Panel Detect Process
====================

Panel sends INIT message then waits for response from Brain. If no response received within 2s, panel resets.
Brain receives INIT message from one or more panels. Brain starts detect process by sending DETECT_1 message.
All initiated panels go to READY mode.
All unititated panels receive DETECT_1 message and respond immediately with REQ_ID_1 header with 24 bits of UUID (29 bit extended CAN id).
Brain detects lowest UUID (part 1) and sends DETECT_2 message with payload containing received 24 bits of UUID.
Panels not matching UUID (part 1) return to INIT condition. Panels matching UUID (part 1) send REQ_ID_2 header with next 24 bits of UUID.
Process continues until all 96 bits have been received by Brain. Brain sends SET_ID message with payload containing last 24 bits of UUID and 8 bits of panel ID.
Only one client should remain negotiating. Panel receives SET_ID message and sets its ID, responds with ACK_ID, configures receive filter and goes into READY mode.
Brain restarts detect process by sending DETECT_1.
If no response received within 200ms, detect process ends. Brain sends START message.
All configured panels go to RUN mode.

Brain can send RESET message to force all panels to reset and enter INIT mode, e.g. Brain resets and needs full update.
If Brain has record for a panel (UUID[0:95]) then it reissues the same panel ID, e.g. panel resets and needs to initialise.
Any panel powered up during detect process may send (low priority) INIT message which will be ignored. After timeout panel will retry which should be after detect process has finished, triggering a new detet process.
INIT is lowest priority to avoid interferring with other messages but may need to be higher than runtime messages to allow a new panel to be detected on a busy bus. This may be undesirable where a noisy (faulty) panel could interfere with normal operation. Also, panel detection will normally be at power-up or during manual physical insertion so the bus shouldn't be saturated. So low priority makes more sense for resilience.
Detect and request messages have increasing priority to allow detection process to progress without interference from rogue panels. All panels should partake in detection process or be silent but there is the risk of a panel misbhaving or timing variance causing interferrence.